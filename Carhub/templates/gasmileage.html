{% extends 'base_vehicle.html' %} {% block pagecontent %}

<h2>Gas Mileage Tracker</h2>

<h3>Average MPG: {{ avgmpg }}</h3>
<h3>Miles Recorded: {{ milestotal }}</h3>

<div>
  <div class="btn-group" data-toggle="buttons-radio">
    <button type="button" class="btn">Most Recent Fuel Up</button>
    <button type="button" class="btn">1 M</button>
    <button type="button" class="btn">3 M</button>
    <button type="button" class="btn">1 Yr</button>
    <button type="button" class="btn">All</button>
    <button type="button" class="btn">Custom</button>
  </div>
  
  <a class="btn btn-primary pull-right" href="/vehicle/{{ car.key.id }}/gasmileage/add">Add Fuel Transaction</a>
</div>

<table class="table table-striped table-bordered" id="gasmileagetable">
  <thead>
    <tr>
      <th>Date</th>
      <th>MPG</th>
      <th>Total Price</th>
      <th>$ / Gallon</th>
      <th>Location</th>
      <th>Fuel Grade</th>
      <th>Odometer Range</th>
    </tr>
  </thead>

  {% for e in userfuelrecords %}
  <tr>
    <td>{{ e.date_formatted }}</td>

    {% if e.odometerEnd != -1 and e.odometerStart != -1 and e.gallons > 0 and e.odometerEnd >= e.odometerStart %}
    <td>{{ e.mpg_formatted }}</td>
    {% else %}
    <td>N/A</td>
    {% endif %}

    <td>{{ e.amount_formatted }}</td>
    <td>{{ e.costPerGallon_formatted }}</td>

    {% if e.location == "" %}
    <td>N/A</td>
    {% else %}
    <td>{{ e.location }}</td>
    {% endif %}

    <td>{{ e.fuelGrade }}</td>

    <td>
    {% if e.odometerStart == -1 %}
    N/A - 
    {% else %}
    {{ e.odometerStart_formatted }} -
    {% endif %}
    {% if e.odometerEnd == -1 %}
    N/A
    {% else %}
    {{ e.odometerEnd_formatted }}
    {% endif %}
    </td>

</tr>
{% endfor %}

</table>

{% endblock %}
{% block externaljs %}

<script type="text/javascript" src="/static/js/ext/jquery.dataTables.min.js"></script>
<script>

$(document).ready(function() {
	$('#gasmileagetable').dataTable( {
		"sDom": "<'row'<'span6'l><'span6'f>r>t",
		"bPaginate": false,
        "bLengthChange": false,
        "bFilter": false,
        "bSort": true,
        "bInfo": false,
        "bAutoWidth": false,
        "aaSorting": [[ 0, 'desc' ]]
	} );
});

</script>

{% endblock %}
