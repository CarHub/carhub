{% extends 'base_vehicle.html' %} 
{% block externalcss %}
<link rel="stylesheet" href="/static/css/validationEngine.jquery.css" type="text/css"/>
<link rel="stylesheet" href="/static/css/datepicker.css" type="text/css"/>
{% endblock %}

{% block pagecontent %}

<h2 class="generic hidden">Add Expense</h2>
<h2 class="maintenance hidden">Add Maintenance Record</h2>
<h2 class="gasmileage hidden">Add Fuel Up Record</h2>


<form id="addform" action="add" method="post">
  <div class="generic maintenance gasmileage hidden">
    <p>Date of Purchase</p>
    <input type="text" class="validate[required,custom[date],past[now],future[1920-01-01]]"  name="datePurchased" id="datePurchased">
  </div>
  
  <div class="generic maintenance hidden" >
  
  <div class="tabbable well well-small">
      <ul id="categorytab" class="nav nav-tabs">
        <li class="active"><a href="#lA" data-toggle="tab">Category</a></li>
        <li class=""><a href="#lB" data-toggle="tab">Add New Category</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" id="lA">
	      <select id="category" name="category">
	        <option>Select a Category</option>
	        {% for category in categories %}
	        <option>{{ category }}</option>
	        {% endfor %}
	      </select>
        </div>
        <div class="tab-pane" id="lB">
		  <input type="text" class="btn-addcategory" name="newCategory" id="newCategory">
          <button type="button" class="btn btn-inverse btn-addcategory" id="categoryButton">+</button>
        </div>
      </div>
    </div>
  </div> 
  
  
  <div class="generic maintenance gasmileage hidden">
    <p>Location</p>
    <input type="text" name="location">

    <p>Amount Spent ($)</p>
    <input type="text" class="validate[required, custom[number]]" name="amount" id="amount">
  </div>
  <div class="generic maintenance hidden">
    <p>Description of Purchase</p>
    <input type="text" name="description">
  </div>
  
  <div class="gasmileage hidden">    
    <p>Price Per Gallon</p>
    <input type="text" class="validate[required,custom[number]]" name="pricepergallons">
    
    <p>Fuel Grade</p>
    <select name="grade" id="grade">
      <option value="Regular">Regular</option>
      <option value="Mid">Mid</option>
      <option value="Premium">Premium</option>
      <option value="Diesel">Diesel</option>
    </select>
  </div>
    
  <div class="maintenance gasmileage hidden">
    <p>Current Odometer Reading</p>
    <input type="text" class="validate[integer, min[0]]" name="odometer">
  </div>
  
  
  <div class="gasmileage hidden">
   <div class="tabbable well well-small">
      <ul id="odometertab" class="nav nav-tabs">
        <li class="active"><a href="#lA" data-toggle="tab">Last Fuel Record</a></li>
        <li class=""><a href="#lB" data-toggle="tab">Manual Entry</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" id="lA">
	      {% if not lastfuelrecord %}
		  	<input type="checkbox" id="sinceLastFuelRecord"
		      name="sinceLastFuelRecord"  /> First fuel up since last fuel record? <br />
		  
		  {% else %}
		  <input type="checkbox" id="sinceLastFuelRecord"
		      name="sinceLastFuelRecord" checked /> First fuel up since last fuel record? <br />
			<table class="table table-striped table-bordered" id="lastgasmileagetable">
			  <thead>
				  <tr>
				    <th>Date</th>
				    <th>Total Price</th>
				    <th>$ / Gallon</th>
				    <th>Location</th>
				    <th>Odometer</th>
				  </tr>
			  </thead>
				<tr>
					<td>{{ lastfuelrecord.date }}</td>
					<td>{{ lastfuelrecord.amount|stringformat:".2f" }}</td>
					<td>{{ lastfuelrecord.costPerGallon|stringformat:".2f" }}</td>
					{% if lastfuelrecord.location == "" %}
					  <td>N/A</td>
					{% else %}
					  <td>{{ lastfuelrecord.location }}</td>
					{% endif %}
					
					{% if lastfuelrecord.odometerEnd == -1 %}
					  <td>N/A</td>
					{% else %}
					  <td>{{ lastfuelrecord.odometerEnd }}</td>
					{% endif %}
				</tr>
			 </table>
			 {% endif %}
        </div>
        <div class="tab-pane" id="lB">
		  <input type="text" class="btn-addcategory" name="newCategory" id="newCategory">
          <button type="button" class="btn btn-inverse btn-addcategory" id="categoryButton">+</button>
        </div>
      </div>
    </div>
  </div> 
  
  {% if not lastfuelrecord %}
  	<input type="checkbox" id="sinceLastFuelRecord"
      name="sinceLastFuelRecord"  /> First fuel up since last fuel record? <br />
  
  {% else %}
  <input type="checkbox" id="sinceLastFuelRecord"
      name="sinceLastFuelRecord" checked /> First fuel up since last fuel record? <br />
	<table class="table table-striped table-bordered" id="lastgasmileagetable">
	  <thead>
		  <tr>
		    <th>Date</th>
		    <th>Total Price</th>
		    <th>$ / Gallon</th>
		    <th>Location</th>
		    <th>Odometer</th>
		  </tr>
	  </thead>
		<tr>
			<td>{{ lastfuelrecord.date }}</td>
			<td>{{ lastfuelrecord.amount|stringformat:".2f" }}</td>
			<td>{{ lastfuelrecord.costPerGallon|stringformat:".2f" }}</td>
			{% if lastfuelrecord.location == "" %}
			  <td>N/A</td>
			{% else %}
			  <td>{{ lastfuelrecord.location }}</td>
			{% endif %}
			
			{% if lastfuelrecord.odometerEnd == -1 %}
			  <td>N/A</td>
			{% else %}
			  <td>{{ lastfuelrecord.odometerEnd }}</td>
			{% endif %}
		</tr>
	 </table>
	 {% endif %}
  </div>
  <br />
  <button type="submit" class="btn btn-primary">Submit</button>
</form>

{% endblock %} 
{% block externaljs %}
<script type="text/javascript" src="/static/js/ext/bootstrap-datepicker.js"></script>
<script src="/static/js/ext/jquery.validationEngine-en.js" type="text/javascript" ></script>
<script src="/static/js/ext/jquery.validationEngine.js" type="text/javascript" ></script>
<script type="text/javascript" src="/static/js/addexpense.js"></script>
{% endblock %}
