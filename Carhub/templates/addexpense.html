{% extends 'base_vehicle.html' %} 
{% block externalcss %}
<link rel="stylesheet" href="/static/css/validationEngine.jquery.css" type="text/css"/>
<link rel="stylesheet" href="/static/css/datepicker.css" type="text/css"/>
{% endblock %}

{% block pagecontent %}

<h2 class="generic hidden">Add Expense</h2>
<h2 class="maintenance hidden">Add Maintenance Record</h2>
<h2 class="gasmileage hidden">Add Fuel Up Record</h2>


<form id="addform" action="add" method="post">
  <div class="generic maintenance gasmileage hidden">
    <p>Date of Purchase</p>
    <input type="text" class="validate[required,custom[date],past[now],future[1920-01-01]]"  name="datePurchased" id="datePurchased">
  </div>
  
  <div class="generic hidden" >
  <p>Category</p>
  <div>
    <div class="accordion" id="accordion3">
      <div class="accordion-group">
        <div class="accordion-heading">
          <a class="accordion-toggle" data-toggle="collapse"
            data-parent="#accordion3" href="#collapseOne">Use Existing Category</a>
        </div>
        <div id="collapseOne" class="accordion-body collapse in">
          <div class="accordion-inner">
            <select id="category1" name="category1">
              <option>Select a Category</option>
              {% for category in categories %}
              <option>{{ category }}</option>
              {% endfor %}
            </select>
          </div>
        </div>
      </div>
      <div class="accordion-group">
        <div class="accordion-heading">
          <a class="accordion-toggle" data-toggle="collapse"
            data-parent="#accordion3" href="#collapseTwo">Use New Category</a>
        </div>
        <div id="collapseTwo" class="accordion-body collapse">
          <div class="accordion-inner">
            <p>Enter a new category name</p>
            <input type="text" name="newCategory1" id="newCategory1">
          </div>
        </div>
      </div>
    </div>
  </div>
  
    <p>Category</p>
    <select id="category" name="category">
      <option>Select a Category</option>
      {% for category in categories %}
      <option>{{ category }}</option>
      {% endfor %}
    </select>
    <input type="text" name="newCategory" id="newCategory">
    <button type="button" class="btn btn-primary" id="categoryButton">Add and Use New Category</button>
  <br>
  </div> 
  
  <div class="generic maintenance gasmileage hidden">
    <p>Location</p>
    <input type="text" name="location">

    <p>Amount Spent ($)</p>
    <input type="text" class="validate[required, custom[number]]" name="amount" id="amount">
  </div>
  <div class="generic maintenance hidden">
    <p>Description of Purchase</p>
    <input type="text" name="description">
  </div>
  
  <div class="gasmileage hidden">    
    <p>Price Per Gallon</p>
    <input type="text" class="validate[required,custom[number]]" name="pricepergallons">
    
    <p>Fuel Grade</p>
    <select name="grade" id="grade">
      <option value="Regular">Regular</option>
      <option value="Mid">Mid</option>
      <option value="Premium">Premium</option>
      <option value="Diesel">Diesel</option>
    </select>
  </div>
    
  <div class="maintenance gasmileage hidden">
    <p>Odometer Reading</p>
    <input type="text" class="validate[integer, min[0]]" name="odometer">
  </div>
  
  
  <div class="gasmileage hidden">
  
  {% if not lastfuelrecord %}
  	<input type="checkbox" id="sinceLastFuelRecord"
      name="sinceLastFuelRecord"  /> First fuel up since last fuel record? <br />
  
  {% else %}
  <input type="checkbox" id="sinceLastFuelRecord"
      name="sinceLastFuelRecord" checked /> First fuel up since last fuel record? <br />
	<table class="table table-striped table-bordered" id="lastgasmileagetable">
	  <thead>
		  <tr>
		    <th>Date</th>
		    <th>Total Price</th>
		    <th>$ / Gallon</th>
		    <th>Location</th>
		    <th>Odometer</th>
		  </tr>
	  </thead>
		<tr>
			<td>{{ lastfuelrecord.date }}</td>
			<td>{{ lastfuelrecord.amount|stringformat:".2f" }}</td>
			<td>{{ lastfuelrecord.costPerGallon|stringformat:".2f" }}</td>
			{% if lastfuelrecord.location == "" %}
			  <td>N/A</td>
			{% else %}
			  <td>{{ lastfuelrecord.location }}</td>
			{% endif %}
			
			{% if lastfuelrecord.odometerEnd == -1 %}
			  <td>N/A</td>
			{% else %}
			  <td>{{ lastfuelrecord.odometerEnd }}</td>
			{% endif %}
		</tr>
	 </table>
	 {% endif %}
  </div>
  <br />
  <button type="submit" class="btn btn-primary">Submit</button>
</form>

{% endblock %} 
{% block externaljs %}
<script type="text/javascript" src="/static/js/ext/bootstrap-datepicker.js"></script>
<script src="/static/js/ext/jquery.validationEngine-en.js" type="text/javascript" ></script>
<script src="/static/js/ext/jquery.validationEngine.js" type="text/javascript" ></script>
<script type="text/javascript" src="/static/js/addexpense.js"></script>
{% endblock %}
